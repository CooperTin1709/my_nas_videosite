<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#030714" />
  <title>yTdd_Base</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;700&family=Noto+Serif+SC:wght@300;400;600&display=swap" rel="stylesheet" />
  
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      width: 100%;
      overflow-x: hidden;
      background: #030714;
    }

    body {
      min-height: 100dvh;
      color: #fff;
      font-family: 'Noto Serif SC', 'PingFang SC', 'Microsoft YaHei', serif;
    }

    /* ── 入场通用动画 ── */
    @keyframes smoothEntry {
      0% { opacity: 0; transform: translateY(24px); filter: blur(12px); }
      100% { opacity: 1; transform: translateY(0); filter: blur(0); }
    }

    /* ── 星云背景 ── */
    .nebula {
      position: fixed;
      inset: 0;
      z-index: 0;
      background:
        radial-gradient(ellipse 90% 60% at 10% 15%,  rgba(80, 20, 140, 0.35) 0%, transparent 55%),
        radial-gradient(ellipse 70% 55% at 88% 75%,  rgba(20, 50, 130, 0.28) 0%, transparent 55%),
        radial-gradient(ellipse 50% 40% at 55% 45%,  rgba(120, 20, 80,  0.12) 0%, transparent 65%),
        radial-gradient(ellipse 30% 30% at 30% 80%,  rgba(40, 80, 160,  0.15) 0%, transparent 55%),
        #030714;
      pointer-events: none;
    }

    canvas {
      position: fixed;
      inset: 0;
      z-index: 1;
      pointer-events: none; /* 让鼠标事件穿透到下层 */
    }

    /* ── 页面主层 ── */
    .page {
      position: relative;
      z-index: 2;
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: max(32px, env(safe-area-inset-top, 32px)) 20px max(32px, env(safe-area-inset-bottom, 32px));
    }

    /* ── 主卡片 ── */
    .card {
      width: min(460px, 90vw);
      background: rgba(255, 255, 255, 0.035);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 32px;
      padding: clamp(32px, 7vw, 56px) clamp(28px, 6vw, 48px);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: clamp(24px, 5vw, 36px);
      box-shadow:
        0 0 80px rgba(120, 50, 220, 0.12),
        0 24px 80px rgba(0, 0, 0, 0.6);
      text-align: center;
      /* 入场动画 */
      animation: smoothEntry 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    /* ── 标题：流光特效 ── */
    .title-main {
      font-family: 'Raleway', sans-serif;
      font-size: clamp(32px, 8vw, 48px);
      font-weight: 700;
      letter-spacing: 0.02em;
      line-height: 1.2;
      /* 核心特效：流光渐变 */
      background: linear-gradient(
        110deg,
        #ffffff 0%,
        #e0c3fc 25%,
        #ffffff 50%,
        #fce3c3 75%,
        #ffffff 100%
      );
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: drop-shadow(0 0 16px rgba(210, 140, 255, 0.4));
      animation: textShine 6s linear infinite;
    }

    @keyframes textShine {
      to { background-position: 200% center; }
    }

    /* ── 分隔线 ── */
    .divider {
      width: 48px;
      height: 2px;
      border-radius: 2px;
      background: linear-gradient(90deg, transparent, rgba(210, 155, 255, 0.4), transparent);
    }

    /* ── 按钮组 ── */
    .btns {
      display: flex;
      flex-direction: column;
      gap: 16px;
      width: 100%;
    }

    .btn {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      min-height: 56px;
      padding: 14px 22px;
      border-radius: 18px;
      text-decoration: none;
      font-family: 'Noto Serif SC', serif;
      font-size: clamp(14px, 3.8vw, 15px);
      font-weight: 600;
      letter-spacing: 0.08em;
      border: none;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    .btn svg {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
      transition: transform 0.3s ease;
    }

    @media (hover: hover) {
      .btn:hover { transform: translateY(-4px); }
      .btn:hover svg { transform: scale(1.15); }
      .btn:active { transform: scale(0.96); }
    }

    /* 影视按钮 */
    .btn-cinema {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.96), rgba(255, 214, 230, 0.94));
      color: #3b091d;
      box-shadow: 0 4px 16px rgba(255, 150, 175, 0.2);
    }

    @media (hover: hover) {
      .btn-cinema:hover {
        box-shadow: 0 12px 32px rgba(255, 150, 175, 0.45);
        background: linear-gradient(135deg, #ffffff, #ffc9db);
      }
    }

    /* NAS 按钮 */
    .btn-nas {
      background: rgba(255, 255, 255, 0.05);
      color: rgba(255, 240, 210, 0.9);
      border: 1px solid rgba(255, 210, 140, 0.25);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    }

    @media (hover: hover) {
      .btn-nas:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 210, 140, 0.6);
        box-shadow: 0 12px 32px rgba(255, 200, 80, 0.15);
      }
    }

    /* ── 页脚 ── */
    .footer-text {
      font-family: 'Raleway', sans-serif;
      font-size: 11px;
      color: rgba(255, 255, 255, 0.15);
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }

    /* ══════════════════════════════════════ */
    /*  MODAL (极简高级现代风)                */
    /* ══════════════════════════════════════ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      z-index: 200;
      background: rgba(2, 5, 22, 0.65);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      animation: overlayIn 0.5s ease forwards;
    }

    .modal-overlay.closing {
      animation: overlayOut 0.4s ease forwards;
      pointer-events: none;
    }

    @keyframes overlayIn  { from { opacity: 0; } to { opacity: 1; } }
    @keyframes overlayOut { from { opacity: 1; } to { opacity: 0; } }

    .modal {
      position: relative;
      width: min(340px, 88vw);
      background: #fdfdfd;
      border-radius: 28px;
      padding: 56px 36px 44px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 36px;
      box-shadow: 0 24px 64px rgba(0, 0, 0, 0.4);
      text-align: center;
      color: #1a1a1a;
      animation: modalScaleIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    @keyframes modalScaleIn {
      from { transform: translateY(30px) scale(0.9); opacity: 0; }
      to   { transform: translateY(0) scale(1); opacity: 1; }
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: transparent;
      border: none;
      color: #aaa;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: color 0.3s;
    }

    .modal-close:hover { color: #222; }

    /* 弹窗内容：阶梯式浮现动画 */
    .modal-content {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .modal-content > div {
      opacity: 0;
      animation: smoothEntry 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    .m-greeting {
      font-size: 14px;
      color: #777;
      letter-spacing: 0.12em;
      animation-delay: 0.2s; /* 延迟出现 */
    }

    .m-title {
      font-size: 24px;
      font-weight: 600;
      color: #000;
      letter-spacing: 0.08em;
      animation-delay: 0.4s;
    }

    .m-signature {
      font-size: 13px;
      color: #999;
      margin-top: 12px;
      letter-spacing: 0.05em;
      font-style: italic;
      animation-delay: 0.6s;
    }

    .modal-action {
      opacity: 0;
      padding: 14px 46px;
      border-radius: 30px;
      background: #000;
      color: #fff;
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.12em;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      animation: smoothEntry 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      animation-delay: 0.8s; /* 最后出现 */
    }

    .modal-action:hover {
      background: #222;
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
    }

    .modal-action:active { transform: scale(0.97); }
  </style>
</head>
<body>

<div class="nebula"></div>
<canvas id="canvas"></canvas>

<!-- ════ 弹窗 ════ -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <button class="modal-close" id="closeBtn" aria-label="关闭">✕</button>

    <div class="modal-content">
      <div class="m-greeting">欢迎，雷宜婷</div>
      <div class="m-title">19岁生日快乐</div>
      <div class="m-signature">——Cooper</div>
    </div>

    <button class="modal-action" id="modalOkBtn">ENTER</button>
  </div>
</div>

<!-- ════ 主页面 ════ -->
<div class="page">
  <div class="card">
    <div class="title-group">
      <h1 class="title-main">yTdd_Base</h1>
    </div>

    <div class="divider"></div>

    <div class="btns">
      <!-- 飞牛影视 -->
      <a class="btn btn-cinema"
         href="https://video.20070303.xyz:4443/v"
         target="_blank" rel="noopener noreferrer">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="5 3 19 12 5 21 5 3"/>
        </svg>
        进入影视
      </a>

      <!-- NAS 主页 -->
      <a class="btn btn-nas"
         href="https://nas.20070303.xyz:14443"
         target="_blank" rel="noopener noreferrer">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="2" y="3" width="20" height="14" rx="2"/>
          <path d="M8 21h8M12 17v4"/>
        </svg>
        NAS 主页
      </a>
    </div>

    <p class="footer-text">— Made By CooperTin —</p>
  </div>
</div>

<script>
/* ══ MODAL 逻辑 ══ */
function closeModal() {
  const overlay = document.getElementById('modalOverlay');
  overlay.classList.add('closing');
  overlay.addEventListener('animationend', () => overlay.remove(), { once: true });
}
document.getElementById('closeBtn').addEventListener('click', closeModal);
document.getElementById('modalOkBtn').addEventListener('click', closeModal);
document.getElementById('modalOverlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) closeModal();
});

/* ══ STAR CANVAS (视差互动版) ══ */
(function () {
  const canvas = document.getElementById('canvas');
  const ctx    = canvas.getContext('2d');
  let W, H;
  
  // 视差相关的鼠标坐标
  let mouseX = 0, mouseY = 0;
  let targetX = 0, targetY = 0;

  let stars = [];
  const STAR_COLORS = [
    [255, 255, 255], [210, 225, 255], [255, 242, 210], [255, 210, 225], [225, 205, 255]
  ];

  function initStars() {
    stars = [];
    const n = Math.min(Math.floor(W * H / 3500), 450); // 稍微增加一点星星密度
    for (let i = 0; i < n; i++) {
      const c    = STAR_COLORS[Math.floor(Math.random() * STAR_COLORS.length)];
      const base = Math.random() * 0.65 + 0.30;
      // 增加一个 z 轴深度值，用于计算视差偏移量
      const z = Math.random() * 0.8 + 0.2; 
      stars.push({
        x: Math.random() * W,
        y: Math.random() * H,
        r: (Math.random() * 1.5 + 0.5) * z,
        base,
        z: z, 
        phase: Math.random() * Math.PI * 2,
        speed: Math.random() * 0.015 + 0.005,
        color: c,
        glow: Math.random() < 0.1,
      });
    }
  }

  let shooters = [];
  let nextShot = rnd(2000, 6000);
  let lastShot = 0;

  function rnd(a, b) { return a + Math.random() * (b - a); }

  function spawnShooter() {
    const fromTop = Math.random() > 0.4;
    const sx = fromTop ? Math.random() * W * 1.2 : W + 60;
    const sy = fromTop ? -60 : rnd(-60, H * 0.45);
    const angle = rnd(0.4, 0.8);
    const spd   = rnd(12, 22);
    const len   = rnd(100, 220);
    shooters.push({
      x: sx, y: sy,
      vx: -Math.cos(angle) * spd,
      vy:  Math.sin(angle) * spd,
      alpha: 1,
      trail: [],
      maxTrail: Math.ceil(len / 5),
      dead: false,
    });
  }

  function drawFrame(ts) {
    ctx.clearRect(0, 0, W, H);

    // 平滑缓动计算视差偏移
    targetX += (mouseX - targetX) * 0.05;
    targetY += (mouseY - targetY) * 0.05;

    stars.forEach(s => {
      s.phase += s.speed;
      const tw   = (Math.sin(s.phase) + 1) * 0.5;
      const a    = s.base * (0.4 + 0.6 * tw);
      const [r, g, b] = s.color;
      
      // 根据 z 值计算星星的坐标偏移（深度的星星移动少，浅层的移动多）
      let drawX = s.x + targetX * s.z * 0.05;
      let drawY = s.y + targetY * s.z * 0.05;

      // 让星星在画布外时从另一边无缝循环出现
      if (drawX > W + 10) drawX -= (W + 20);
      else if (drawX < -10) drawX += (W + 20);
      if (drawY > H + 10) drawY -= (H + 20);
      else if (drawY < -10) drawY += (H + 20);

      if (s.glow && s.r > 1.0) {
        const gr = ctx.createRadialGradient(drawX, drawY, 0, drawX, drawY, s.r * 6);
        gr.addColorStop(0, `rgba(${r},${g},${b},${a * 0.5})`);
        gr.addColorStop(1, `rgba(${r},${g},${b},0)`);
        ctx.beginPath();
        ctx.arc(drawX, drawY, s.r * 6, 0, Math.PI * 2);
        ctx.fillStyle = gr;
        ctx.fill();
      }

      ctx.beginPath();
      ctx.arc(drawX, drawY, s.r, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(${r},${g},${b},${a})`;
      ctx.fill();
    });

    if (ts - lastShot > nextShot) {
      spawnShooter();
      lastShot = ts;
      nextShot = rnd(2000, 6000);
    }

    shooters.forEach(s => {
      if (s.dead) return;
      s.trail.unshift({ x: s.x, y: s.y });
      if (s.trail.length > s.maxTrail) s.trail.pop();
      s.x += s.vx;
      s.y += s.vy;
      s.alpha -= 0.015;
      if (s.alpha <= 0 || s.x < -200 || s.y > H + 100) { s.dead = true; return; }

      if (s.trail.length > 1) {
        const tail = s.trail[s.trail.length - 1];
        const grd  = ctx.createLinearGradient(s.x, s.y, tail.x, tail.y);
        grd.addColorStop(0, `rgba(255,248,255,${s.alpha})`);
        grd.addColorStop(1, `rgba(255,220,255,0)`);
        ctx.beginPath();
        ctx.moveTo(s.x, s.y);
        s.trail.forEach(p => ctx.lineTo(p.x, p.y));
        ctx.strokeStyle = grd;
        ctx.lineWidth   = 2;
        ctx.stroke();
      }

      ctx.beginPath();
      ctx.arc(s.x, s.y, 2, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
      ctx.fill();
    });

    shooters = shooters.filter(s => !s.dead);
    requestAnimationFrame(drawFrame);
  }

  function resize() {
    W = canvas.width  = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }

  window.addEventListener('resize', () => { resize(); initStars(); });
  
  // 监听鼠标移动，实现视差
  window.addEventListener('mousemove', e => {
    mouseX = e.clientX - W / 2;
    mouseY = e.clientY - H / 2;
  });
  
  // 监听手机陀螺仪/倾斜 (仅对支持的移动端有效)
  window.addEventListener("deviceorientation", e => {
    if (e.gamma !== null && e.beta !== null) {
      mouseX = e.gamma * 8; // 左右倾斜
      mouseY = e.beta * 8;  // 前后倾斜
    }
  });

  resize();
  initStars();
  requestAnimationFrame(drawFrame);
})();
</script>
</body>
</html>
